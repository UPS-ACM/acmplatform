<!DOCTYPE html>
<html>
  <head>
  <title>LogJam</title>
  <link rel="stylesheet" type="text/css" href="map.css">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta charset="utf-8">
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBInghLZWYDJBA789Ga2_2qTmM5DLb1nno&libraries=places"></script>
  <script src="data.js"></script>
    <script>

      var map
      var avgLat = 0.0
      var avgLng = 0.0
      function findCenter(){
        for (var i = 0; i<data.length; i++){
          avgLat+=data[i][0].lat,
          avgLng+=data[i][0].lng
        }
      }
      findCenter()
      avgLat/=data.length
      avgLng/=data.length
      var myCenter = new google.maps.LatLng(avgLat,avgLng);//new google.maps.LatLng(47.262190,-122.481500);

      var markers = [];
      
      function initialize(){
        var mapProp = {
          center: myCenter,
          zoom:19,
          disableDefaultUI:false,
          mapTypeId: google.maps.MapTypeId.SATELLITE//ROADMAP
        };

        map = new google.maps.Map(document.getElementById("map"),mapProp);

        var marker, i;
        var infoBox = new google.maps.InfoWindow();

        map.setTilt(0);
        google.maps.event.addListener(map, 'click', function(){
          infoBox.close();
        })

        // potential icons i guess
        var image = //'http://i.turner.ncaa.com/dr/ncaa/ncaa7/release/sites/default/files/images/logos/schools/p/puget-sound.40.png';
        //'http://soundideas.pugetsound.edu/assets/institution_icons/2068434.png'; //hatchet
        'http://tartarus.rpgclassics.com/ss2/item/0026.gif';
        //'https://s-media-cache-ak0.pinimg.com/avatars/univpugetsound-61_30.jpg';
        //'http://www.htmlcsscolor.com/preview/16x16/660000.png';
        //'http://icons.veryicon.com/ico/System/Led/clipboard%20text.ico';//'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png';
    
        //*
        var getCenterTag = document.getElementById('centerthing');
        for (i = 0; i<data.length; i++){
          
          marker = new google.maps.Marker({
            map: map,
            position: data[i][0],//positions[i],
            icon: image
          });
          google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function(){
              infoBox.setContent(data[i][1]);
              infoBox.open(map, marker);  
            }
          })(marker, i));
          //attachInfo(marker, i);
          markers.push(marker);

          var createA = document.createElement('a');
          var createAText = document.createTextNode(data[i][2]);
          createA.setAttribute("href", "#");
          createA.setAttribute("onClick", "myClick("+i+");");
          createA.appendChild(createAText);
          getCenterTag.appendChild(createA);
          getCenterTag.appendChild(document.createElement('br'));
          getCenterTag.appendChild(document.createElement('br'));
        }

        function attachInfo(marker, info){
          marker.addListener('click', function(){
            infoBox.setContent(data[info][1]);//info);
            //infoBox.open(marker.get('map'), marker);
            infoBox.open(map, marker);
          })
        }
      } // end of intitialize()
      // actually load the map
      google.maps.event.addDomListener(window, 'load', initialize);
      //*
      function myClick(id){
        google.maps.event.trigger(markers[id], 'click');
      }//*/
    </script>
  </head>
  <body>
    <center>
    <div id ="map" style ="width:100g%;height:400px;"></div>
    <h2>Find your favorite clubs!</h2>
    <div id="centerthing"></div>
    <!--
    <a href="#" onClick="myClick(0);">Club number 1</a><br>
    <a href="#" onClick="myClick(1);">Club number 2</a><br>
    <a href="#" onClick="myClick(2);">Club number 3</a><br>
    <a href="#" onClick="myClick(3);">Club number 4</a><br>
    <a href="#" onClick="myClick(4);">Club number 5</a><br>
    <a href="#" onClick="myClick(5);">Club number 6</a><br>
    <a href="#" onClick="myClick(6);">Club number 7</a><br>
    <a href="#" onClick="myClick(7);">Club number 8</a><br>
    <a href="#" onClick="myClick(8);">Club number 9</a><br>
    <a href="#" onClick="myClick(9);">Club number 10</a><br>
    <a href="#" onClick="myClick(10);">Club number 11</a><br>
    <a href="#" onClick="myClick(11);">Club number 12</a><br>
    <a href="#" onClick="myClick(12);">Club number 13</a><br>
    <a href="#" onClick="myClick(13);">Club number 14</a><br>
    <a href="#" onClick="myClick(14);">Club number 15</a><br>
    <a href="#" onClick="myClick(15);">Club number 16</a><br>
  -->
    </center>
  </body>
</html>

